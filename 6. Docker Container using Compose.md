# ğŸ³ Docker Compose WordPress + MySQL SOP

**Objective:** Deploy WordPress with MySQL using Docker Compose and verify connectivity.

---

## 1ï¸âƒ£ **Check Docker Compose Version**

```bash
docker compose version
```

**Result:**

```
Docker Compose version v2.40.0
```

| Emoji | Command                  | Meaning                                          |
| ----- | ------------------------ | ------------------------------------------------ |
| ğŸ› ï¸   | `docker compose version` | Checks which Docker Compose version is installed |

**Info:** You are running **v2.40.0**, which supports modern Compose files.

---

## 2ï¸âƒ£ **Create Project Directory**

```bash
mkdir -p docker-compose
cd docker-compose/
```

| Emoji | Command                   | Meaning                                             |
| ----- | ------------------------- | --------------------------------------------------- |
| ğŸ“    | `mkdir -p docker-compose` | Creates a directory for your Docker Compose project |
| ğŸ“‚    | `cd docker-compose/`      | Navigates into the project folder                   |

**Tip:** Organizing your Docker files keeps your setup clean.

---

## 3ï¸âƒ£ **Check Existing Volumes, Images, Containers**

```bash
docker volume ls
docker images
docker container ls
```

**Results:**

```
docker volume ls
DRIVER    VOLUME NAME
```

```
docker images
REPOSITORY   TAG       IMAGE ID   CREATED   SIZE
```

```
docker container ls
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
```

| Emoji | Command               | Meaning                      |
| ----- | --------------------- | ---------------------------- |
| ğŸ“¦    | `docker volume ls`    | Lists all Docker volumes     |
| ğŸ–¼ï¸   | `docker images`       | Lists all Docker images      |
| ğŸ“‹    | `docker container ls` | Lists all running containers |

**Note:** At this point, nothing was created yet.

---

## 4ï¸âƒ£ **Create a Persistent Volume**

```bash
docker volume create db_data
docker volume ls
```

**Result:**

```
db_data
```

| Emoji | Command                        | Meaning                                                       |
| ----- | ------------------------------ | ------------------------------------------------------------- |
| ğŸ’¾    | `docker volume create db_data` | Creates a Docker volume named `db_data` for MySQL persistence |
| ğŸ“¦    | `docker volume ls`             | Verify the volume exists                                      |

---

## 5ï¸âƒ£ **Create `docker-compose.yaml`**

```yaml
version: '3.8'

services:
  db:
    image: mysql:latest
    volumes:
      - db_data:/var/lib/mysql
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: somewordpress
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: wordpress

  wordpress:
    depends_on:
      - db
    image: wordpress:latest
    ports:
      - "8000:80"
    restart: always
    environment:
      WORDPRESS_DB_HOST: db:3306
      WORDPRESS_DB_USER: wordpress
      WORDPRESS_DB_PASSWORD: wordpress
      WORDPRESS_DB_NAME: wordpress
    volumes:
      - db_data:/var/lib/mysql

volumes:
  db_data:
```

**Common Issues Fixed:**

* `volume` â†’ `volumes` âœ…
* `enviroment` â†’ `environment` âœ…
* Correct indentation and quotes for `ports` âœ…

| Emoji | Field        | Meaning                           |
| ----- | ------------ | --------------------------------- |
| ğŸ§©    | `services`   | Defines containers to run         |
| ğŸ—„ï¸   | `volumes`    | Defines persistent storage        |
| ğŸ”Œ    | `depends_on` | Ensures WordPress waits for MySQL |

---

## 6ï¸âƒ£ **Validate Compose File**

```bash
docker compose config
```

**Output:** (simplified)

```
wordpress:
  image: wordpress:latest
  ports:
    - 8000:80
db:
  image: mysql:latest
  volumes:
    - db_data:/var/lib/mysql
```

**Info:** Confirms your YAML syntax is correct. âœ…

---

## 7ï¸âƒ£ **Start Containers**

```bash
docker compose up -d
```

**Output:**

```
[+] Running 4/4
âœ” Network docker-compose_default Created
âœ” Volume docker-compose_db_data Created
âœ” Container docker-compose-db-1 Started
âœ” Container docker-compose-wordpress-1 Started
```

| Emoji | Command                | Meaning                            |
| ----- | ---------------------- | ---------------------------------- |
| â–¶ï¸    | `docker compose up -d` | Starts services in detached mode   |
| ğŸ”„    | `-d`                   | Detached mode (runs in background) |

**Tip:** Watch logs with:

```bash
docker compose logs -f
```

---

## 8ï¸âƒ£ **Verify Running Containers**

```bash
docker container ls
```

**Output:**

```
CONTAINER ID   IMAGE              COMMAND                  STATUS          PORTS
dda3240a9b6a   wordpress:latest   "docker-entrypoint.sâ€¦"   Up 18 minutes   0.0.0.0:8000->80/tcp
6004a9b8feb3   mysql:latest       "docker-entrypoint.sâ€¦"   Up 18 minutes   3306/tcp
```

**Info:** WordPress is now accessible at `http://<server-ip>:8000`

---

## 9ï¸âƒ£ **Network Interfaces**

```bash
ifconfig
```

**Highlights:**

* `docker0` â†’ default bridge network
* `br-xxxx` â†’ created for each Compose project
* Ensures container communication âœ…

---

## ğŸ”Ÿ **Test WordPress**

```bash
curl http://<server-ip>:8000/wp-admin/install.php?step=1
```

**Result:** WordPress installation page HTML returned âœ…

**Tip:** Open browser â†’ `http://<server-ip>:8000/wp-admin/install.php` to complete setup.

---

## 1ï¸âƒ£1ï¸âƒ£ **Stop & Remove Containers**

```bash
docker compose down
```

**Output:**

```
âœ” Container docker-compose-wordpress-1  Removed
âœ” Container docker-compose-db-1 Removed
âœ” Network docker-compose_default Removed
```

| Emoji | Command               | Meaning                                                  |
| ----- | --------------------- | -------------------------------------------------------- |
| ğŸ›‘    | `docker compose down` | Stops and removes containers, networks but keeps volumes |
| âŒ     | `docker container ps` | Verify no containers are running                         |

---

## 1ï¸âƒ£2ï¸âƒ£ **Check Volumes After Removal**

```bash
docker volume ls
```

**Output:**

```
DRIVER    VOLUME NAME
local     db_data
local     docker-compose_db_data
```

**Info:** Data persists in volumes even if containers are removed. âœ…

---

## ğŸ’¡ **Quick Tips / Notes**

| Emoji | Info                                                                                   |
| ----- | -------------------------------------------------------------------------------------- |
| ğŸ”‘    | Volume `db_data` keeps MySQL data safe across container recreations                    |
| ğŸŒ    | Use `0.0.0.0:8000->80` to access WordPress from outside the server                     |
| âš¡     | Fix YAML issues by checking: indentation, `environment`, `volumes`, and `ports` format |
| ğŸ“    | Use `docker compose logs -f` to troubleshoot container startup issues                  |
| ğŸ’»    | Use `curl` or browser to verify WordPress installation                                 |

---

## âœ… **Interactive Summary**

* **Volume created:** `db_data` ğŸ’¾
* **Containers running:** WordPress & MySQL ğŸ³
* **WordPress URL:** `http://<server-ip>:8000/wp-admin/install.php` ğŸŒ
* **Persistent storage:** MySQL database survives container deletion ğŸ’¾
* **Compose file syntax validated** âœ”ï¸
