# ðŸ³ Docker Networking â€“ Bridge & Host Network (Hands-On Demo)

ðŸ“‚ **Repo Folder:** `networking-demo/`
ðŸŽ¯ **Goal:** Understand bridge and host networks by creating, inspecting, and testing container connectivity.

---

## âš™ï¸ Step 1: List Existing Networks

```bash
docker network ls
```

âœ… **Output:**

```
NETWORK ID     NAME      DRIVER    SCOPE
86eaba428284   bridge    bridge    local
88b3a0c0e3e2   host      host      local
69f93251cbe9   none      null      local
```

> **Explanation:** Lists all Docker networks available on the host. Default ones are `bridge`, `host`, and `none`.

---

## ðŸ” Step 2: Inspect Default Bridge Network

```bash
docker network inspect bridge
```

âœ… **Output (trimmed):**

```json
[
  {
    "Name": "bridge",
    "Driver": "bridge",
    "IPAM": {
      "Config": [
        {
          "Subnet": "172.17.0.0/16"
        }
      ]
    }
  }
]
```

> **Explanation:** Shows the IP subnet used by the default bridge (`docker0`) and confirms it uses the `bridge` driver.

---

## ðŸš€ Step 3: Run a Container on Host Network

```bash
docker container run -dt --name=myhost --network host busybox:latest
docker ps
```

âœ… **Output:**

```
CONTAINER ID   IMAGE            COMMAND   STATUS          NAMES
1ca09a1f42fb   busybox:latest   "sh"      Up 1 minute     myhost
```

> **Explanation:**
> Host network shares the hostâ€™s network stack. The container uses the host IP directly, no NAT required.

---

## ðŸŒ‰ Step 4: Create Containers on Default Bridge Network

```bash
docker container run -dt --name=mybridge01 ubuntu
docker container run -dt --name=mybridge02 ubuntu
docker ps -a
```

âœ… **Output:**

```
CONTAINER ID   IMAGE    COMMAND       STATUS         NAMES
6496a2e2d26b   ubuntu   "/bin/bash"   Up 1 minute    mybridge02
ca9701192301   ubuntu   "/bin/bash"   Up 1 minute    mybridge01
```

> **Explanation:** Containers on default bridge can communicate **via IP**, but container names are **not automatically resolved**.

---

## ðŸ§° Step 5: Access Container Shell

```bash
docker container exec -it mybridge01 bash
```

âœ… **Output (inside container):**

```
root@ca9701192301:/#
```

---

## ðŸ”§ Step 6: Install Network Tools

```bash
apt-get update && apt-get install -y iputils-ping net-tools
```

âœ… **Output (trimmed):**

```
Setting up iputils-ping ...
Setting up net-tools ...
```

> **Explanation:**
>
> * `iputils-ping` â†’ allows testing connectivity with `ping`
> * `net-tools` â†’ provides `ifconfig`, `route`, `netstat` to inspect network interfaces and routes.
>   These are not installed in minimal Ubuntu containers by default.

---

## ðŸ“¡ Step 7: Ping Another Container (Default Bridge)

```bash
ping 172.17.0.3
```

âœ… **Output:**

```
PING 172.17.0.3 (172.17.0.3) 56(84) bytes of data.
64 bytes from 172.17.0.3: icmp_seq=1 ttl=64 time=0.085 ms
64 bytes from 172.17.0.3: icmp_seq=2 ttl=64 time=0.078 ms
--- 172.17.0.3 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss
```

> **Explanation:** Containers on the default bridge network can communicate **via IP addresses**, but names are not resolvable.

---

## ðŸ§© Step 8: Create a Custom Bridge Network

```bash
docker network create --driver bridge mybridge
docker network ls
```

âœ… **Output:**

```
NETWORK ID     NAME       DRIVER    SCOPE
86eaba428284   bridge     bridge    local
88b3a0c0e3e2   host       host      local
25217972bea9   mybridge   bridge    local
69f93251cbe9   none       null      local
```

> **Explanation:**
> Custom bridge allows **container name resolution** (DNS) and better management of multi-container apps.

---

## ðŸš¢ Step 9: Run Containers on Custom Bridge

```bash
docker container run -dt --name=bridge01 --network mybridge ubuntu
docker container run -dt --name=bridge02 --network mybridge ubuntu
docker ps
```

âœ… **Output:**

```
CONTAINER ID   IMAGE    COMMAND       STATUS        NAMES
dc28ac0a5b50   ubuntu   "/bin/bash"   Up 3 sec      bridge02
0e41fd098336   ubuntu   "/bin/bash"   Up 10 sec     bridge01
```

---

## ðŸ–¥ï¸ Step 10: Enter Container and Install Ping Tools

```bash
docker container exec -it bridge01 bash
apt-get update && apt-get install -y iputils-ping net-tools
```

âœ… **Output (trimmed):**

```
Setting up iputils-ping ...
Setting up net-tools ...
```

---

## ðŸŒ Step 11: Test Connectivity Between Containers (Custom Bridge)

```bash
ping bridge02
```

âœ… **Output:**

```
PING bridge02 (172.18.0.3) 56(84) bytes of data.
64 bytes from bridge02.mybridge (172.18.0.3): icmp_seq=1 ttl=64 time=0.243 ms
64 bytes from bridge02.mybridge (172.18.0.3): icmp_seq=2 ttl=64 time=0.065 ms
--- bridge02 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss
```

> **Explanation:** Custom bridge allows **containers to resolve each other by name** using Dockerâ€™s embedded DNS.

---

## ðŸ“‹ Summary Table

| Network Type      | Description                           | Example Container      | Communication    |
| ----------------- | ------------------------------------- | ---------------------- | ---------------- |
| **bridge**        | Default network mode for containers   | mybridge01, mybridge02 | By IP only       |
| **custom bridge** | User-defined network with DNS support | bridge01, bridge02     | By name or IP    |
| **host**          | Shares hostâ€™s network stack           | myhost                 | Full host access |
| **none**          | No networking                         | â€”                      | Isolated         |

---

## ðŸ’¡ Step 12: Bridge Interface Verification

```bash
brctl show
```

âœ… **Output:**

```
bridge name     bridge id               STP enabled     interfaces
docker0         8000.0242c0a80102       no              vethabc123
```

> **Explanation:** Verifies that containers are connected to the hostâ€™s virtual bridge interface. Useful for troubleshooting.

---

## ðŸ§  Step 13: Key Takeaways

* ðŸ§© **Custom bridge networks** allow **name-based communication** between containers.
* ðŸ”’ **Default bridge** requires manual IP usage for communication.
* ðŸŒŽ **Host network** gives containers **direct access to the host network stack**.
* ðŸš« **None network** isolates the container from all networking.

---

âœ… **Purpose of Each Network:**

| Network            | Purpose / Use Case                                                      |
| ------------------ | ----------------------------------------------------------------------- |
| **Default Bridge** | Quick setup, isolated, communicates via IP, good for small experiments. |
| **Custom Bridge**  | Multi-container apps, DNS name resolution, easier container management. |
| **Host**           | High-performance apps needing host network access, monitoring.          |
| **None**           | Security testing or sandboxing, fully isolated.                         |

---
